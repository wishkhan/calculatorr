<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neon Calculator</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #1a1f3a 0%, #2d2d4a 50%, #243b55 100%);
      overflow: hidden;
      position: relative;
    }

    html, body {
      height: 100%;
    }

    body::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 30%, rgba(138, 43, 226, 0.2) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(0, 255, 255, 0.2) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(255, 64, 129, 0.15) 0%, transparent 50%);
      animation: backgroundShift 15s ease infinite;
      z-index: 0;
    }

    body::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(2px 2px at 20% 30%, rgba(255, 255, 255, 0.4), transparent),
        radial-gradient(2px 2px at 60% 70%, rgba(255, 255, 255, 0.3), transparent),
        radial-gradient(1px 1px at 50% 50%, rgba(255, 255, 255, 0.4), transparent),
        radial-gradient(1px 1px at 80% 10%, rgba(255, 255, 255, 0.3), transparent),
        radial-gradient(2px 2px at 90% 60%, rgba(255, 255, 255, 0.4), transparent),
        radial-gradient(1px 1px at 33% 50%, rgba(255, 255, 255, 0.3), transparent),
        radial-gradient(1px 1px at 70% 30%, rgba(255, 255, 255, 0.4), transparent);
      background-size: 200% 200%;
      background-position: 0% 0%;
      animation: stars 60s linear infinite;
      z-index: 0;
    }

    @keyframes backgroundShift {
      0%, 100% {
        transform: translate(0, 0) scale(1);
      }
      33% {
        transform: translate(10%, -10%) scale(1.1);
      }
      66% {
        transform: translate(-10%, 10%) scale(0.9);
      }
    }

    @keyframes stars {
      from {
        background-position: 0% 0%;
      }
      to {
        background-position: 100% 100%;
      }
    }

    .calculator-container {
      width: 100%;
      max-width: 420px;
      padding: 20px;
      box-sizing: border-box;
      position: relative;
      z-index: 1;
    }

    .calculator {
      background: rgba(45, 45, 74, 0.5);
      backdrop-filter: blur(30px);
      border-radius: 30px;
      padding: 30px;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.4),
        0 0 80px rgba(138, 43, 226, 0.5),
        0 0 120px rgba(0, 255, 255, 0.3),
        inset 0 1px 1px rgba(255, 255, 255, 0.15);
      border: 2px solid rgba(138, 43, 226, 0.4);
      position: relative;
    }

    .calculator::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 30px;
      padding: 2px;
      background: linear-gradient(135deg, rgba(138, 43, 226, 0.6), rgba(0, 255, 255, 0.6), rgba(255, 64, 129, 0.6));
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      animation: borderGlow 3s ease infinite;
      pointer-events: none;
    }

    @keyframes borderGlow {
      0%, 100% {
        opacity: 0.6;
      }
      50% {
        opacity: 1;
      }
    }

    .display {
      background: rgba(30, 34, 60, 0.9);
      border-radius: 20px;
      padding: 30px 25px;
      margin-bottom: 25px;
      border: 1px solid rgba(138, 43, 226, 0.5);
      box-shadow: 
        inset 0 2px 10px rgba(0, 0, 0, 0.4),
        0 0 40px rgba(138, 43, 226, 0.4);
      min-height: 80px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .previous-operand {
      color: rgba(186, 85, 211, 0.8);
      font-size: 1.2rem;
      text-align: right;
      margin-bottom: 5px;
      min-height: 1.5rem;
      font-weight: 300;
      letter-spacing: 1px;
    }

    .current-operand {
      color: #00ffff;
      font-size: 2.5rem;
      text-align: right;
      font-weight: 400;
      letter-spacing: 2px;
      text-shadow: 0 0 25px rgba(0, 255, 255, 0.9);
      min-height: 3rem;
      word-wrap: break-word;
      word-break: break-all;
    }

    .buttons-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
    }

    button {
      background: rgba(255, 255, 255, 0.12);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 18px;
      color: #ffffff;
      font-size: 1.4rem;
      font-weight: 500;
      padding: 25px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.3),
        inset 0 1px 1px rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }

    button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    button:hover::before {
      width: 300px;
      height: 300px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.3),
        0 0 30px rgba(138, 43, 226, 0.4),
        inset 0 1px 1px rgba(255, 255, 255, 0.2);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 
        0 2px 10px rgba(0, 0, 0, 0.2),
        inset 0 1px 1px rgba(255, 255, 255, 0.1);
    }

    .operator {
      background: linear-gradient(135deg, rgba(138, 43, 226, 0.5), rgba(106, 27, 154, 0.5));
      border: 1px solid rgba(138, 43, 226, 0.7);
      color: #da70ff;
      text-shadow: 0 0 15px rgba(186, 85, 211, 1);
    }

    .operator:hover {
      background: linear-gradient(135deg, rgba(138, 43, 226, 0.7), rgba(106, 27, 154, 0.7));
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.3),
        0 0 40px rgba(138, 43, 226, 0.8),
        inset 0 1px 1px rgba(255, 255, 255, 0.2);
    }

    .equals {
      background: linear-gradient(135deg, rgba(0, 255, 255, 0.4), rgba(0, 200, 200, 0.4));
      border: 1px solid rgba(0, 255, 255, 0.6);
      color: #00ffff;
      text-shadow: 0 0 15px rgba(0, 255, 255, 1);
      grid-column: span 2;
    }

    .equals:hover {
      background: linear-gradient(135deg, rgba(0, 255, 255, 0.6), rgba(0, 200, 200, 0.6));
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.3),
        0 0 40px rgba(0, 255, 255, 0.9),
        inset 0 1px 1px rgba(255, 255, 255, 0.2);
    }

    .clear {
      background: linear-gradient(135deg, rgba(255, 64, 129, 0.4), rgba(220, 20, 90, 0.4));
      border: 1px solid rgba(255, 64, 129, 0.6);
      color: #ff6b9d;
      text-shadow: 0 0 15px rgba(255, 64, 129, 1);
      grid-column: span 2;
    }

    .clear:hover {
      background: linear-gradient(135deg, rgba(255, 64, 129, 0.6), rgba(220, 20, 90, 0.6));
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.3),
        0 0 40px rgba(255, 64, 129, 0.9),
        inset 0 1px 1px rgba(255, 255, 255, 0.2);
    }

    .number:hover {
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.3),
        0 0 30px rgba(255, 255, 255, 0.3),
        inset 0 1px 1px rgba(255, 255, 255, 0.2);
    }

    @media (max-width: 480px) {
      .calculator {
        padding: 20px;
      }

      .display {
        padding: 20px 15px;
        min-height: 60px;
      }

      .current-operand {
        font-size: 2rem;
      }

      .previous-operand {
        font-size: 1rem;
      }

      button {
        padding: 20px;
        font-size: 1.2rem;
      }

      .buttons-grid {
        gap: 12px;
      }
    }

    @media (max-width: 360px) {
      button {
        padding: 18px;
        font-size: 1.1rem;
      }

      .current-operand {
        font-size: 1.8rem;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <main class="calculator-container">
   <div class="calculator">
    <div class="display">
     <div class="previous-operand" id="previous-operand"></div>
     <div class="current-operand" id="current-operand">
      0
     </div>
    </div>
    <div class="buttons-grid"><button class="clear" data-action="clear">AC</button> <button class="operator" data-action="delete">DEL</button> <button class="operator" data-action="operator">÷</button> <button class="number" data-number="7">7</button> <button class="number" data-number="8">8</button> <button class="number" data-number="9">9</button> <button class="operator" data-action="operator">×</button> <button class="number" data-number="4">4</button> <button class="number" data-number="5">5</button> <button class="number" data-number="6">6</button> <button class="operator" data-action="operator">-</button> <button class="number" data-number="1">1</button> <button class="number" data-number="2">2</button> <button class="number" data-number="3">3</button> <button class="operator" data-action="operator">+</button> <button class="number" data-number="0">0</button> <button class="number" data-number=".">.</button> <button class="equals" data-action="equals">=</button>
    </div>
   </div>
  </main>
  <script>
    const defaultConfig = {
      display_text: "0",
      background_color: "#1a1f3a",
      secondary_surface_color: "#2d2d4a",
      text_color: "#00ffff",
      primary_action_color: "#8a2be2",
      secondary_action_color: "#ff4081"
    };

    let currentOperand = '0';
    let previousOperand = '';
    let operation = null;
    let shouldResetScreen = false;

    const currentOperandElement = document.getElementById('current-operand');
    const previousOperandElement = document.getElementById('previous-operand');

    function updateDisplay() {
      currentOperandElement.textContent = currentOperand;
      if (operation) {
        previousOperandElement.textContent = `${previousOperand} ${operation}`;
      } else {
        previousOperandElement.textContent = previousOperand;
      }
    }

    function clear() {
      currentOperand = '0';
      previousOperand = '';
      operation = null;
      shouldResetScreen = false;
      updateDisplay();
    }

    function deleteNumber() {
      if (currentOperand === '0' || shouldResetScreen) return;
      currentOperand = currentOperand.slice(0, -1);
      if (currentOperand === '' || currentOperand === '-') {
        currentOperand = '0';
      }
      updateDisplay();
    }

    function appendNumber(number) {
      if (shouldResetScreen) {
        currentOperand = '';
        shouldResetScreen = false;
      }
      if (number === '.' && currentOperand.includes('.')) return;
      if (currentOperand === '0' && number !== '.') {
        currentOperand = number;
      } else {
        currentOperand += number;
      }
      updateDisplay();
    }

    function chooseOperation(op) {
      if (currentOperand === '' || currentOperand === '-') return;
      if (previousOperand !== '') {
        calculate();
      }
      operation = op;
      previousOperand = currentOperand;
      shouldResetScreen = true;
      updateDisplay();
    }

    function calculate() {
      let result;
      const prev = parseFloat(previousOperand);
      const current = parseFloat(currentOperand);
      if (isNaN(prev) || isNaN(current)) return;

      switch (operation) {
        case '+':
          result = prev + current;
          break;
        case '-':
          result = prev - current;
          break;
        case '×':
          result = prev * current;
          break;
        case '÷':
          if (current === 0) {
            currentOperand = 'Error';
            previousOperand = '';
            operation = null;
            updateDisplay();
            shouldResetScreen = true;
            return;
          }
          result = prev / current;
          break;
        default:
          return;
      }

      currentOperand = result.toString();
      if (currentOperand.includes('.') && currentOperand.split('.')[1].length > 8) {
        currentOperand = parseFloat(currentOperand).toFixed(8).replace(/\.?0+$/, '');
      }
      operation = null;
      previousOperand = '';
      shouldResetScreen = true;
      updateDisplay();
    }

    document.querySelectorAll('.number').forEach(button => {
      button.addEventListener('click', () => {
        appendNumber(button.dataset.number);
      });
    });

    document.querySelectorAll('.operator').forEach(button => {
      if (button.dataset.action === 'operator') {
        button.addEventListener('click', () => {
          chooseOperation(button.textContent);
        });
      } else if (button.dataset.action === 'delete') {
        button.addEventListener('click', deleteNumber);
      }
    });

    document.querySelector('.clear').addEventListener('click', clear);

    document.querySelector('.equals').addEventListener('click', calculate);

    document.addEventListener('keydown', (e) => {
      if (e.key >= '0' && e.key <= '9') appendNumber(e.key);
      if (e.key === '.') appendNumber(e.key);
      if (e.key === 'Enter' || e.key === '=') calculate();
      if (e.key === 'Backspace') deleteNumber();
      if (e.key === 'Escape') clear();
      if (e.key === '+') chooseOperation('+');
      if (e.key === '-') chooseOperation('-');
      if (e.key === '*') chooseOperation('×');
      if (e.key === '/') {
        e.preventDefault();
        chooseOperation('÷');
      }
    });

    async function onConfigChange(config) {
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.secondary_surface_color || defaultConfig.secondary_surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryActionColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryActionColor = config.secondary_action_color || defaultConfig.secondary_action_color;

      document.body.style.background = `linear-gradient(135deg, ${bgColor} 0%, ${surfaceColor} 50%, #243b55 100%)`;
      currentOperandElement.style.color = textColor;
      currentOperandElement.style.textShadow = `0 0 25px ${textColor}E6`;

      document.querySelectorAll('.operator').forEach(btn => {
        btn.style.background = `linear-gradient(135deg, ${primaryActionColor}80, ${primaryActionColor}66)`;
        btn.style.borderColor = `${primaryActionColor}B3`;
        btn.style.color = primaryActionColor;
        btn.style.textShadow = `0 0 15px ${primaryActionColor}`;
      });

      const equalsBtn = document.querySelector('.equals');
      equalsBtn.style.background = `linear-gradient(135deg, ${textColor}66, ${textColor}66)`;
      equalsBtn.style.borderColor = `${textColor}99`;
      equalsBtn.style.color = textColor;
      equalsBtn.style.textShadow = `0 0 15px ${textColor}`;

      const clearBtn = document.querySelector('.clear');
      clearBtn.style.background = `linear-gradient(135deg, ${secondaryActionColor}66, ${secondaryActionColor}66)`;
      clearBtn.style.borderColor = `${secondaryActionColor}99`;
      clearBtn.style.color = secondaryActionColor;
      clearBtn.style.textShadow = `0 0 15px ${secondaryActionColor}`;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                window.elementSdk.config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.secondary_surface_color || defaultConfig.secondary_surface_color,
              set: (value) => {
                window.elementSdk.config.secondary_surface_color = value;
                window.elementSdk.setConfig({ secondary_surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                window.elementSdk.config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => {
                window.elementSdk.config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (value) => {
                window.elementSdk.config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ["display_text", config.display_text || defaultConfig.display_text]
        ])
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9aa2c77be71990a4',t:'MTc2NTA5NzQ2Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>